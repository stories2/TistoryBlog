/*
 * 2017.03.08
 * Copyright 2017, kakao corp
*/

__jsDragSearchHandler=function(){try{var e,t,n,o,a,r,d,i,s,l,c="DragSchLayerPos",u="DragSchLayer",m=navigator.userAgent.indexOf("MSIE"),p=navigator.userAgent.indexOf("Opera");return _jsAddEvent=function(e,t,n){e.addEventListener?("mousewheel"==t&&(t="DOMMouseScroll"),e.addEventListener(t,n,!1)):e.attachEvent("on"+t,n)},_jsStopEvent=function(e){var t=e||window.event;t.preventDefault?(t.preventDefault(),t.stopPropagation()):(t.returnValue=!1,t.cancelBubble=!0)},_jsRemove=function(e){return e=document.getElementById(e),e.parentNode.removeChild(e),e},_jsGetStyle=function(e,t){var n=e.style[t];if(!n)if(document.defaultView&&document.defaultView.getComputedStyle&&p==-1){var o=document.defaultView.getComputedStyle(e,null);n=o?o[t]:null}else e.currentStyle&&(n="backgroundPosition"==t?e.currentStyle.backgroundPositionX+" "+e.currentStyle.backgroundPositionY:e.currentStyle[t]);return"auto"==n?null:n},_jsTrim=function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},_jsSetSelectionAttrs=function(){e=document.selection.createRange(),t=e.text.toString(),o=e.htmlText},_jsDragHandler=function(r){try{n=t,(i||a)&&_jsCleanSelection(),window.getSelection?document.activeElement&&"textarea"!=document.activeElement.tagName.toLowerCase()&&"input"!=document.activeElement.tagName.toLowerCase()&&(e=window.getSelection(),!e.duplicate&&document.selection?_jsSetSelectionAttrs():(t=e.toString(),o=t)):document.selection&&_jsSetSelectionAttrs(),t=_jsTrim(t),""!=t&&t!=n&&t.length>1?(_jsGetStrChk(r),s?(_jslayerHandler(),_jsStopEvent(r)):_jsCleanSelection()):_jsCleanSelection()}catch(d){_jsCleanSelection()}},_jsGetStrChk=function(e){var n=o.length;s=!0,t.indexOf(" ")>0?t.length>10&&(s=!1):t.length>20&&(s=!1),s&&("Microsoft Internet Explorer"==navigator.appName?(_event=window.event,_nodeName=_event.srcElement.nodeName):"Netscape"==navigator.appName?(_event=e,_nodeName=_event.target.nodeName):(_event=window.event,_nodeName=_event.srcElement.nodeName),"INPUT"!=_nodeName&&"SELECT"!=_nodeName&&"TEXTAREA"!=_nodeName&&"FIELDSET"!=_nodeName||(s=!1),m!=-1&&s&&n>4&&(strChkBr=_jsTrim(o.substring(n-4,n)),"<BR>"==strChkBr.toUpperCase()&&(s=!1),o.toUpperCase().indexOf("</DT>")>0&&(s=!1)))},_jslayerHandler=function(){try{if(a=document.createElement("span"),a.id=c,a.style.position="absolute",a.style.width="0px",a.style.height="0px",a.style.fontSize="0px",m!=-1){var t=document.createElement("div");t.appendChild(a),r=e.duplicate(),r.setEndPoint("StartToEnd",e),r.pasteHTML(t.innerHTML),a=document.getElementById(c)}else{var n=e.getRangeAt(0);r=document.createRange(),r.setStart(e.focusNode,n.endOffset),r.insertNode(a)}if(!document.getElementById(u)){var o=document.getElementsByTagName("body"),d=document.createElement("span");d.setAttribute("id",u),o[0].appendChild(d),document.getElementById(u).style.display="none"}i=document.getElementById(u),i.style.display="block",_jsPositionHandler(),_jsAddEvent(i,"mouseup",_jsLinkHandler),_jsAddEvent(window,"resize",_jsPositionHandler),l=self.setInterval(_jsChkNodeStyle,500)}catch(s){_jsCleanSelection()}},_jsPositionHandler=function(e){i&&a&&(d=_jsPositionOffset(document.getElementById(c)),i.style.top=d[0]+"px",i.style.left=d[1]+"px")},_jsPositionOffset=function(e){var t=0,n=0;do t+=e.offsetTop||0,n+=e.offsetLeft||0,e=e.offsetParent;while(e);return t<22&&(t+=40),n+70>document.body.offsetWidth&&(n-=60),[t,n]},_jsLinkHandler=function(e){var n="http://drag.search.daum.net/fcgi/dha_morph_delete_josa.fcgi?q="+encodeURIComponent(t),o=window.open(n);o&&o.focus(),_jsCleanSelection(),_jsStopEvent(e)},_jsChkNodeStyle=function(){if(document.getElementById("DragSchLayerPos")){var e=document.getElementById("DragSchLayerPos");do{if(1!=e.nodeType){e=null;break}e=e.parentNode;var t=_jsGetStyle(e,"display");if("none"==t){_jsCleanSelection();break}}while("BODY"!=e.nodeName.toUpperCase())}},_jsCleanSelection=function(){try{e=null,a=null,t="",r&&r.pasteHTML&&r.pasteHTML(""),r=null,document.getElementById(c)&&_jsRemove(c),document.getElementById(u)&&(document.getElementById(u).style.display="none"),document.getElementById(u)&&_jsRemove(u),clearInterval(l)}catch(n){}},_jsInitStyle=function(){var e=document.createElement("style"),t="#DragSchLayer{display:block;position:absolute;z-index:1000;width:61px;height:31px;margin:-30px 0px 0px -5px;background:url(http://search1.daumcdn.net/search/statics/common/pi/btn_drag_rect.png);cursor:pointer}             @media             only screen and (-webkit-min-device-pixel-ratio: 1.5),             only screen and (min-device-pixel-ratio: 1.5),             only screen and (min-resolution: 1.5dppx) {             #DragSchLayer{background-image:url(http://search1.daumcdn.net/search/statics/common/pi/r2/btn_drag_rect.png);background-size:61px 31px}}            ";e.type="text/css",e.styleSheet&&!e.sheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t)),document.getElementsByTagName("head")[0].appendChild(e)},{initialize:function(){_jsInitStyle(),_jsAddEvent(document,"mouseup",_jsDragHandler)}}}catch(g){}}(),__jsDragSearchHandler.initialize();